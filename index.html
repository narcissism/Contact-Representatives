<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Congress Contact App</title>

<style>
body{
  font-family:sans-serif;
  background:white;
  color:black;
  padding:20px;
}
.card{
  border:1px solid #ccc;
  padding:12px;
  margin:8px;
  border-radius:6px;
}
.stateTitle{
  margin-top:30px;
  font-size:22px;
  border-bottom:2px solid #ccc;
}
button{
  margin:4px;
  padding:6px 10px;
}
</style>
</head>

<body>

<h1>Current U.S. Officials</h1>

<button onclick="sortBy('state')">Sort by State</button>
<button onclick="sortBy('position')">Sort by Position</button>
<button onclick="sortBy('pac_total')">Sort by PAC Funding</button>

<div id="list"></div>

<script src="data.js"></script>

<script>
let data = MEMBERS

function sortBy(field){
  data.sort((a,b)=>{
    if(!a[field]) return 1
    if(!b[field]) return -1
    return a[field] > b[field] ? 1 : -1
  })
  render()
}

function render(){
  const list=document.getElementById("list")
  list.innerHTML=""

  let currentState=""

  data.forEach(m=>{

    if(m.state!==currentState){
      currentState=m.state
      const h=document.createElement("div")
      h.className="stateTitle"
      h.innerText=currentState
      list.appendChild(h)
    }

    const div=document.createElement("div")
    div.className="card"

    div.innerHTML=`
      <b>${m.name}</b><br>
      ${m.position} â€“ ${m.party}<br>
      Committees: ${m.committees || "?"}<br>
      PAC Funding: ${m.pac_total || "?"}<br>
      DC Phone: ${m.dc_phone || "?"}<br>
      State Phone: ${m.state_phone || "?"}<br>

      <a href="tel:${m.dc_phone || ""}">ğŸ“ Call DC</a> |
      <a href="tel:${m.state_phone || ""}">ğŸ“ Call State</a> |
      <a href="mailto:${m.email || ""}">âœ‰ï¸ Email</a>
    `

    list.appendChild(div)
  })
}

render()
</script>

</body>
</html>
